!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.EventEmitter=t()}("undefined"!=typeof self?self:this,function(){function e(){this._events={}}return e.prototype.emit=function(e){var t,n,i,o;if("string"==typeof e&&e&&this._events[e])for(o=r(arguments,1),i=(t=this._events[e]).length,n=0;n<i;n++)t[n].apply(this,o);return this},e.prototype.addListener=function(e,t){return"string"==typeof e&&e&&"function"==typeof t&&(this._events[e]||(this._events[e]=[]),this._events[e].push(t)),this},e.prototype.removeListener=function(e,t){var n,i;return"string"==typeof e&&e&&"function"==typeof t&&this._events[e]&&-1<(i=(n=this._events[e]).lastIndexOf(t))&&n.splice(i,1),this},e.prototype.removeAllListeners=function(){return this._events={},this},e.prototype.once=function(e,t){var n,i;return"string"==typeof e&&e&&"function"==typeof t&&(n=function(e){this.removeListener(e.eventName,e.wrappedListener),e.listener.apply(this,r(arguments,1))}.bind(this,i={eventName:e,listener:t,wrappedListener:null}),i.wrappedListener=n,this.addListener(e,n)),this},e.prototype.on=e.prototype.addListener,e.prototype.off=e.prototype.removeListener,e;function r(e,t){for(var n=[],i=e.length,o=t;o<i;o++)n.push(e[o]);return n}});