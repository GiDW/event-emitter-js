!function(e){function t(){this._events=[]}function n(e,t){var n,o,r;for(n=[],o=e.length,r=t;r<o;r++)n.push(e[r]);return n}t.prototype.emit=function(e){var t,o,r,i;if(t=this._events[e])for(o=n(arguments,1),r=t.length,i=0;i<r;i++)t[i].apply(this,o);return this},t.prototype.addListener=function(e,t){return"function"==typeof t&&(this._events[e]||(this._events[e]=[]),this._events[e].push(t)),this},t.prototype.removeListener=function(e,t){var n,o;return(n=this._events[e])&&"function"==typeof t&&(o=n.lastIndexOf(t))>-1&&n.splice(o,1),this},t.prototype.removeAllListeners=function(){return this._events={},this},t.prototype.once=function(e,t){var n;return"function"==typeof t&&((n={eventName:e,listener:t}).wrappedListener=this._once.bind(this,n),this.addListener(e,n.wrappedListener)),this},t.prototype._once=function(e){e.wrappedListener&&(this.removeListener(e.eventName,e.wrappedListener),e.listener.apply(this,n(arguments,1)))},t.prototype.on=t.prototype.addListener,t.prototype.off=t.prototype.removeListener,"object"==typeof module&&module.exports?(module.exports=t,module.exports.default=t):e.EventEmitter=t}("undefined"!=typeof self?self:this);